{% extends 'base.html' %}

{% block title %}Cell line {{ cellline.celllinename }}{% endblock %}

{% block article %}

<h1>{{ cellline.celllinename }} <small>{{ cellline.biosamplesid }}</small></h1>

<div class="status">
    {% if cellline.celllineaccepted == 'accepted' or not perms.site.can_manage_executive_dashboard %}
    Status:
    {% else %}
    Change status:
    {% endif %}
    {% include 'executive/accepted-status.html' %}
</div>

<div class="batches">
    <h2>Batches</h2>

    <ul class="accordion">
    {% for batch in cellline.batch.all %}
    <li><a href="javascript:void(0)" class="js-accordion-trigger">{{ batch.biosamplesid }} <small>({{ batch.aliquot.count }} vials)</small> <i class="glyphicon glyphicon-chevron-down"></i></a>
        <div class="content">
        <p><a href="{% url 'executive:batch_data' cellline.biosamplesid batch.biosamplesid %}">Download vial Biosample IDs</a></p>
        <p><i>No data available.</i></p>
        </div>
    </li>
    {% endfor%}
    </ul>

</div>

{% include 'search/__cellline_data__.html' %}

{% endblock %}

{% block extra-scripts %}
{% if perms.site.can_manage_executive_dashboard %}
{% include 'executive/accepted-script.html' %}
{% endif %}
<script>
$('.js-accordion-trigger').bind('click', function(e){
  jQuery(this).parent().find('.content').slideToggle('fast');  // apply the toggle to the ul
  jQuery(this).parent().toggleClass('is-expanded');
  e.preventDefault();
});
</script>
{% endblock %}
